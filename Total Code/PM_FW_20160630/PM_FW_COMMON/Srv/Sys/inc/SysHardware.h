/*
*********************************************************************************************************************** 
*                  Copyright(c) 北京康吉森技术有限公司 2015
*           Beijing Consen Technologies Co.,Ltd. All rights reserved.
*
*
*  项目名称    : 安全控制系统
*
*  模块名称    : 系统资源管理模块
*
*  文件名称    : SysHardware.h
*
*  功能简介    :
*
*  作者       : 李琦
*
*  创建日期    : 2016-05-13
*
*  版本信息    : V1.0
*
*  修订信息    : 无
*
***********************************************************************************************************************
*/

#ifndef SYS_HARDWARE_H_
#define SYS_HARDWARE_H_

/*
***********************************************************************************************************************
*                                包含头文件
***********************************************************************************************************************
*/
#include "../../../inc/Hardware.h"
#include "../../../inc/DataType.h"

/*
***********************************************************************************************************************
*                                宏定义
***********************************************************************************************************************
*/


/*
***********************************************************************************************************************
*                                数据结构定义
***********************************************************************************************************************
*/
/* 24v报警位*/
typedef enum AlarmTag
{
    ALARM_BIT_ERR = 0,                              /* 故障 */
    ALARM_BIT_OK = 1                                /* 正常 */
} Alarm_t;

/*
***********************************************************************************************************************
*                                全局函数声明
***********************************************************************************************************************
*/

/*
***********************************************************************************************************************
* 函数名称: GetTemperature
*
* 功能描述: 获取温度
*
* 输入参数: 无
*
* 输出参数: pfTemp: 指向获取的温度值
*        bpValid: 温度值是否有效
*
* 返 回 值  : 读取温度是否成功
*
* 注意事项: 无
***********************************************************************************************************************
*/
bool_t GetTemperature(float_t *pfTemp, bool_t *bpValid);


/*
***********************************************************************************************************************
* 函数名称: GetSwitchKeyPos
*
* 功能描述: 获取钥匙开关状态
*
* 输入参数: 无
*
* 输出参数: 无
*
* 返 回 值  : 钥匙开关状态（run/stop/prog/init）
*
* 注意事项: 无
***********************************************************************************************************************
*/
uint16_t GetSwitchKeyPos(void);


/*
***********************************************************************************************************************
* 函数名称: Get24Volt1AlarmBit
*
* 功能描述: 获取24v1报警位
*
* 输入参数: 无
*
* 输出参数: 无
*
* 返 回 值  : 故障/正常
*
* 注意事项: 无
***********************************************************************************************************************
*/
Alarm_t Get24Volt1AlarmBit(void);


/*
***********************************************************************************************************************
* 函数名称: Get24Volt2AlarmBit
*
* 功能描述: 获取24v2报警位
*
* 输入参数: 无
*
* 输出参数: 无
*
* 返 回 值  : 故障/正常
*
* 注意事项: 无
***********************************************************************************************************************
*/
Alarm_t Get24Volt2AlarmBit(void);


/*
***********************************************************************************************************************
* 函数名称: GetBatteryAlarmBit
*
* 功能描述: 获取电池报警位
*
* 输入参数: 无
*
* 输出参数: 无
*
* 返 回 值  : 故障/正常
*
* 注意事项: 无
***********************************************************************************************************************
*/
Alarm_t GetBatteryAlarmBit(void);


/*
***********************************************************************************************************************
* 函数名称: UpdateStateLED
*
* 功能描述: 更新状态灯寄存器
*
* 输入参数: usState:待更新内容
*
* 输出参数: 无
*
* 返 回 值  : 无
*
* 注意事项: 无
***********************************************************************************************************************
*/
void UpdateStateLED(uint16_t usState);

/*
***********************************************************************************************************************
* 函数名称: UpdateKeyLED
*
* 功能描述: 更新钥匙灯寄存器
*
* 输入参数: usState:待更新内容
*
* 输出参数: 无
*
* 返 回 值  : 无
*
* 注意事项: 无
***********************************************************************************************************************
*/
void UpdateKeyLED(uint16_t usState);


/*
***********************************************************************************************************************
* 函数名称: UpdateComLED
*
* 功能描述: 更新通讯灯寄存器
*
* 输入参数: usState:待更新内容
*
* 输出参数: 无
*
* 返 回 值  : 无
*
* 注意事项: 无
***********************************************************************************************************************
*/
void UpdateComLED(uint16_t usState);

/*
***********************************************************************************************************************
* 函数名称: SetLocalPMAddr
*
* 功能描述: 设置本机PM地址
*
* 输入参数: iTimeout 超时
*
* 输出参数: 无
*
* 返 回 值  : 设置成功或失败
*
* 注意事项: 无
***********************************************************************************************************************
*/
bool_t SetLocalPMAddr(int32_t iTimeout);

/*
***********************************************************************************************************************
* 函数名称: GetLocalPMAddr
*
* 功能描述: 获取PM地址
*
* 输入参数: 无
*
* 输出参数: 无
*
* 返 回 值  : PM的地址
*
* 注意事项: 无
***********************************************************************************************************************
*/
uint16_t GetLocalPMAddr(void);

/*
***********************************************************************************************************************
* 函数名称: SysGetSyncTimeLow32
*
* 功能描述: 获取同步时间
*
* 输入参数: 无
*
* 输出参数: 无
*
* 返 回 值  : 低32位时间
*
* 注意事项: 无
***********************************************************************************************************************
*/
uint32_t SysGetSyncTimeLow32(void);

/*
***********************************************************************************************************************
* 函数名称: SysGetSyncTimeHigh16
*
* 功能描述: 获取同步时间
*
* 输入参数: 无
*
* 输出参数: 无
*
* 返 回 值  : 高16位时间
*
* 注意事项: 无
***********************************************************************************************************************
*/
uint16_t SysGetSyncTimeHigh16(void);

/*
***********************************************************************************************************************
* 函数名称: SysGetSyncTimeState
*
* 功能描述: 获取同步时间状态
*
* 输入参数: 无
*
* 输出参数: 无
*
* 返 回 值  : 32位时间
*
* 注意事项: "Bit0：0：同步校准未完成，1：同步校准已完成"
***********************************************************************************************************************
*/
uint16_t SysGetSyncTimeState(void);

/*
***********************************************************************************************************************
* 函数名称: SysSetSyncAdjustTimeLow32
*
* 功能描述: 设置同步校时时间
*
* 输入参数: 低32位时间
*
* 输出参数: 无
*
* 返 回 值  : 无
*
* 注意事项: 无
***********************************************************************************************************************
*/
void SysSetSyncAdjustTimeLow32(uint32_t uiAdjustTime);

/*
***********************************************************************************************************************
* 函数名称: SysSetSyncAdjustTimeHigh16
*
* 功能描述: 设置同步校时时间
*
* 输入参数: 高16位时间
*
* 输出参数: 无
*
* 返 回 值  : 无
*
* 注意事项: 无
***********************************************************************************************************************
*/
void SysSetSyncAdjustTimeHigh16(uint16_t usAdjustTime);
/*
***********************************************************************************************************************
* 函数名称: SysSetSyncAdjustTimeEnable
*
* 功能描述: 设置同步校时时间使能
*
* 输入参数: 无
*
* 输出参数: 无
*
* 返 回 值  : 无
*
* 注意事项: 无
***********************************************************************************************************************
*/
void SysSetSyncAdjustTimeEnable(void);

/*
***********************************************************************************************************************
* 函数名称: SysGetModularOnLine
*
* 功能描述: 模块在线状态
*
* 输入参数: 无
*
* 输出参数: 无
*
* 返 回 值  : 在线状态
*
* 注意事项: "Bit1：对模块2主备状态。0：未在线，1：在线"
*         "Bit0：对模块1主备状态。0：未在线，1：在线"
***********************************************************************************************************************
*/
uint16_t SysGetModularOnLine(void);
/*
***********************************************************************************************************************
* 函数名称: SysSetTimerMasterEnable
*
* 功能描述: 设置升主使能
*
* 输入参数: 无
*
* 输出参数: 无
*
* 返 回 值  : 在线状态
*
* 注意事项: 写入0xA5A5指示升主使能，写入0x5A5A指示降备使能，写入其他值无效。
* 
***********************************************************************************************************************
*/
void SysSetTimerMasterEnable(uint16_t usRegVal);
/*
***********************************************************************************************************************
* 函数名称: SysSetSWRuninOK
*
* 功能描述: 设置软件运行OK
*
* 输入参数: 无
*
* 输出参数: 无
*
* 返 回 值  : 在线状态
*
* 注意事项: 写入0xA5A5指示软件运行OK，写入其他值指示软件NOK。
* 
***********************************************************************************************************************
*/
void SysSetSWRuninOK(uint16_t usRegVal);

#endif /* SYS_HARDWARE_H_ */

/*
***********************************************************************************************************************
                                 文件结束
***********************************************************************************************************************
*/

